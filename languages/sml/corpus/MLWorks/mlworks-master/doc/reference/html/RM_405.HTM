<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- Generated by Harlequin WebMaker 3.0.2 ( 8-May-1977) -->
<HEAD>
<LINK REL=TOP HREF="RM_1.HTM">
<LINK REL=UP HREF="RM_404.HTM">
<LINK REL=PREV HREF="RM_404.HTM">
<LINK REL=NEXT HREF="RM_406.HTM">
<TITLE>7.5.1   Machine pointers and stores </TITLE>
<META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.2 ( 8-May-1977)">
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<DIV>
<A NAME=HEADING405></A>

<DIV>
<P><A HREF="RM_406.HTM"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="RM_404.HTM"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="RM_404.HTM"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A> <A HREF="RM_1.HTM"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="RM_2.HTM"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="RM_418.HTM"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>
<P>7.5   The Store structure </P>

</DIV>
<A NAME=HEADING405-0></A>
<H1>7.5.1   <A NAME=MARKER-10-759></A>Machine pointers and stores </H1>
<P>Much foreign data can consist of pointers, represented by explicit machine addresses. Clearly such data may be literally represented within an ML store. However, as noted above, stores can expand in size. To ensure the uniformity of addressing, this expansion is implemented by copying the data in them. Unfortunately this copying invalidates any explicit pointers to other data elements contained in the same store. Other explicit pointers referring to non-local (or remote) data naturally remain valid.</P>
<P>Explicit machine pointers must therefore be treated with care. For example, there is a facility for providing 'local' pointers, which are represented as a local offset from the base address of the store. The use of small indices here means that conventional array indexing can be used directly from ML. Of course, this facility also requires the ability to convert between local indices and actual machine addresses.</P>
<P>The advantage of using 'local' pointers is that they remain invariant under expansion of the store. However, their disadvantage is that they are meaningless if used out of context. Hence, local pointers must not be passed into foreign code -- they must first be converted into machine addresses. The FI provides tools for performing these conversions. </P>
<P>One way of avoiding these difficulties is to work with stores that cannot be expanded, but which have sufficient static space allocated to start with. In this case, machine addresses cannot be invalidated due to store expansion and so can be passed to foreign code with impunity.</P>

</DIV>

<DIV>

<DIV>

<!-- TOC -->

</DIV>

<HR>
<ADDRESS>MLWorks Reference Manual version 2.0 - 29 Jul 1998</ADDRESS>
<P><A HREF="RM_406.HTM"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="RM_404.HTM"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="RM_404.HTM"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A> <A HREF="RM_1.HTM"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="RM_2.HTM"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="RM_418.HTM"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>
<P>Generated with <A HREF="http://www.harlequin.com/webmaker/">Harlequin WebMaker</A></P>

</DIV>
</BODY>
</HTML>
